var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.makeIterator=function(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};$jscomp.arrayFromIterator=function(a){for(var b,c=[];!(b=a.next()).done;)c.push(b.value);return c};
$jscomp.arrayFromIterable=function(a){return a instanceof Array?a:$jscomp.arrayFromIterator($jscomp.makeIterator(a))};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;$jscomp.objectCreate=$jscomp.ASSUME_ES5||"function"==typeof Object.create?Object.create:function(a){var b=function(){};b.prototype=a;return new b};
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(a==Array.prototype||a==Object.prototype)return a;a[b]=c.value;return a};$jscomp.getGlobal=function(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(a,b){var c=$jscomp.propertyToPolyfillSymbol[b];if(null==c)return a[b];c=a[c];return void 0!==c?c:a[b]};
$jscomp.polyfill=function(a,b,c,d){b&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(a,b,c,d):$jscomp.polyfillUnisolated(a,b,c,d))};$jscomp.polyfillUnisolated=function(a,b,c,d){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var f=a[d];if(!(f in c))return;c=c[f]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})};
$jscomp.polyfillIsolated=function(a,b,c,d){var f=a.split(".");a=1===f.length;d=f[0];d=!a&&d in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var l=0;l<f.length-1;l++){var m=f[l];if(!(m in d))return;d=d[m]}f=f[f.length-1];c=$jscomp.IS_SYMBOL_NATIVE&&"es6"===c?d[f]:null;b=b(c);null!=b&&(a?$jscomp.defineProperty($jscomp.polyfills,f,{configurable:!0,writable:!0,value:b}):b!==c&&($jscomp.propertyToPolyfillSymbol[f]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(f):$jscomp.POLYFILL_PREFIX+f,f=
$jscomp.propertyToPolyfillSymbol[f],$jscomp.defineProperty(d,f,{configurable:!0,writable:!0,value:b})))};
$jscomp.getConstructImplementation=function(){function a(){function c(){}new c;Reflect.construct(c,[],function(){});return new c instanceof c}if($jscomp.TRUST_ES6_POLYFILLS&&"undefined"!=typeof Reflect&&Reflect.construct){if(a())return Reflect.construct;var b=Reflect.construct;return function(c,d,f){c=b(c,d);f&&Reflect.setPrototypeOf(c,f.prototype);return c}}return function(c,d,f){void 0===f&&(f=c);f=$jscomp.objectCreate(f.prototype||Object.prototype);return Function.prototype.apply.call(c,f,d)||
f}};$jscomp.construct={valueOf:$jscomp.getConstructImplementation}.valueOf();$jscomp.underscoreProtoCanBeSet=function(){var a={a:!0},b={};try{return b.__proto__=a,b.a}catch(c){}return!1};$jscomp.setPrototypeOf=$jscomp.TRUST_ES6_POLYFILLS&&"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null;
$jscomp.inherits=function(a,b){a.prototype=$jscomp.objectCreate(b.prototype);a.prototype.constructor=a;if($jscomp.setPrototypeOf){var c=$jscomp.setPrototypeOf;c(a,b)}else for(c in b)if("prototype"!=c)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c];a.superClass_=b.prototype};$jscomp.polyfill("Reflect",function(a){return a?a:{}},"es6","es3");$jscomp.polyfill("Reflect.construct",function(a){return $jscomp.construct},"es6","es3");
$jscomp.polyfill("Reflect.setPrototypeOf",function(a){if(a)return a;if($jscomp.setPrototypeOf){var b=$jscomp.setPrototypeOf;return function(c,d){try{return b(c,d),!0}catch(f){return!1}}}return null},"es6","es5");$jscomp.checkEs6ConformanceViaProxy=function(){try{var a={},b=Object.create(new $jscomp.global.Proxy(a,{get:function(c,d,f){return c==a&&"q"==d&&f==b}}));return!0===b.q}catch(c){return!1}};$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1;
$jscomp.ES6_CONFORMANCE=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&$jscomp.checkEs6ConformanceViaProxy();$jscomp.initSymbol=function(){};
$jscomp.polyfill("Symbol",function(a){if(a)return a;var b=function(f,l){this.$jscomp$symbol$id_=f;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:l})};b.prototype.toString=function(){return this.$jscomp$symbol$id_};var c=0,d=function(f){if(this instanceof d)throw new TypeError("Symbol is not a constructor");return new b("jscomp_symbol_"+(f||"")+"_"+c++,f)};return d},"es6","es3");$jscomp.initSymbolIterator=function(){};
$jscomp.polyfill("Symbol.iterator",function(a){if(a)return a;a=Symbol("Symbol.iterator");for(var b="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),c=0;c<b.length;c++){var d=$jscomp.global[b[c]];"function"===typeof d&&"function"!=typeof d.prototype[a]&&$jscomp.defineProperty(d.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return a},"es6",
"es3");$jscomp.initSymbolAsyncIterator=function(){};$jscomp.iteratorPrototype=function(a){a={next:a};a[Symbol.iterator]=function(){return this};return a};$jscomp.owns=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};
$jscomp.polyfill("WeakMap",function(a){function b(){if(!a||!Object.seal)return!1;try{var e=Object.seal({}),h=Object.seal({}),k=new a([[e,2],[h,3]]);if(2!=k.get(e)||3!=k.get(h))return!1;k.delete(e);k.set(h,4);return!k.has(e)&&4==k.get(h)}catch(n){return!1}}function c(){}function d(e){var h=typeof e;return"object"===h&&null!==e||"function"===h}function f(e){if(!$jscomp.owns(e,m)){var h=new c;$jscomp.defineProperty(e,m,{value:h})}}function l(e){if(!$jscomp.ISOLATE_POLYFILLS){var h=Object[e];h&&(Object[e]=
function(k){if(k instanceof c)return k;Object.isExtensible(k)&&f(k);return h(k)})}}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE)return a}else if(b())return a;var m="$jscomp_hidden_"+Math.random();l("freeze");l("preventExtensions");l("seal");var p=0,g=function(e){this.id_=(p+=Math.random()+1).toString();if(e){e=$jscomp.makeIterator(e);for(var h;!(h=e.next()).done;)h=h.value,this.set(h[0],h[1])}};g.prototype.set=function(e,h){if(!d(e))throw Error("Invalid WeakMap key");
f(e);if(!$jscomp.owns(e,m))throw Error("WeakMap key fail: "+e);e[m][this.id_]=h;return this};g.prototype.get=function(e){return d(e)&&$jscomp.owns(e,m)?e[m][this.id_]:void 0};g.prototype.has=function(e){return d(e)&&$jscomp.owns(e,m)&&$jscomp.owns(e[m],this.id_)};g.prototype.delete=function(e){return d(e)&&$jscomp.owns(e,m)&&$jscomp.owns(e[m],this.id_)?delete e[m][this.id_]:!1};return g},"es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(a){function b(){if($jscomp.ASSUME_NO_NATIVE_MAP||!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var g=Object.seal({x:4}),e=new a($jscomp.makeIterator([[g,"s"]]));if("s"!=e.get(g)||1!=e.size||e.get({x:4})||e.set({x:4},"t")!=e||2!=e.size)return!1;var h=e.entries(),k=h.next();if(k.done||k.value[0]!=g||"s"!=k.value[1])return!1;k=h.next();return k.done||4!=k.value[0].x||"t"!=k.value[1]||!h.next().done?!1:!0}catch(n){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE)return a}else if(b())return a;var c=new WeakMap,d=function(g){this.data_={};this.head_=m();this.size=0;if(g){g=$jscomp.makeIterator(g);for(var e;!(e=g.next()).done;)e=e.value,this.set(e[0],e[1])}};d.prototype.set=function(g,e){g=0===g?0:g;var h=f(this,g);h.list||(h.list=this.data_[h.id]=[]);h.entry?h.entry.value=e:(h.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:g,value:e},h.list.push(h.entry),
this.head_.previous.next=h.entry,this.head_.previous=h.entry,this.size++);return this};d.prototype.delete=function(g){g=f(this,g);return g.entry&&g.list?(g.list.splice(g.index,1),g.list.length||delete this.data_[g.id],g.entry.previous.next=g.entry.next,g.entry.next.previous=g.entry.previous,g.entry.head=null,this.size--,!0):!1};d.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=m();this.size=0};d.prototype.has=function(g){return!!f(this,g).entry};d.prototype.get=function(g){return(g=
f(this,g).entry)&&g.value};d.prototype.entries=function(){return l(this,function(g){return[g.key,g.value]})};d.prototype.keys=function(){return l(this,function(g){return g.key})};d.prototype.values=function(){return l(this,function(g){return g.value})};d.prototype.forEach=function(g,e){for(var h=this.entries(),k;!(k=h.next()).done;)k=k.value,g.call(e,k[1],k[0],this)};d.prototype[Symbol.iterator]=d.prototype.entries;var f=function(g,e){var h=e&&typeof e;"object"==h||"function"==h?c.has(e)?h=c.get(e):
(h=""+ ++p,c.set(e,h)):h="p_"+e;var k=g.data_[h];if(k&&$jscomp.owns(g.data_,h))for(g=0;g<k.length;g++){var n=k[g];if(e!==e&&n.key!==n.key||e===n.key)return{id:h,list:k,index:g,entry:n}}return{id:h,list:k,index:-1,entry:void 0}},l=function(g,e){var h=g.head_;return $jscomp.iteratorPrototype(function(){if(h){for(;h.head!=g.head_;)h=h.previous;for(;h.next!=h.head;)return h=h.next,{done:!1,value:e(h)};h=null}return{done:!0,value:void 0}})},m=function(){var g={};return g.previous=g.next=g.head=g},p=0;
return d},"es6","es3");var AssetManager$$module$src$core$AssetManager=function(a){this.engine=a;this.textures=new Map},module$src$core$AssetManager={};module$src$core$AssetManager.default=AssetManager$$module$src$core$AssetManager;var CanvasRenderer$$module$src$core$CanvasRenderer=function(a,b,c){this.engine=a;this.width=b;this.height=c;this.container=window.document.createElement("div");this.container.id="game-container";this.container.style.display="flex";this.container.style.justifyItems="center";this.container.style.alignItems="center";this.container.style.width="100%";this.container.style.height="100%";window.document.body.appendChild(this.container);this.canvas=window.document.createElement("canvas");this.canvas.style.backgroundColor=
"white";this.canvas.width=this.width;this.canvas.height=this.height;this.canvas.style.display="block";this.canvas.style.margin="auto";this.context=this.canvas.getContext("2d");this.container.appendChild(this.canvas)};CanvasRenderer$$module$src$core$CanvasRenderer.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)};var module$src$core$CanvasRenderer={};module$src$core$CanvasRenderer.default=CanvasRenderer$$module$src$core$CanvasRenderer;var SceneManager$$module$src$core$SceneManager=function(a){this.engine=a;this.scenes=[]};SceneManager$$module$src$core$SceneManager.prototype.add=function(a){-1==this.scenes.indexOf(a)&&this.scenes.push(a)};SceneManager$$module$src$core$SceneManager.prototype.remove=function(a){a.destroy()};SceneManager$$module$src$core$SceneManager.prototype.update=function(a){for(var b=0;b<this.scenes.length;b++){var c=this.scenes[b];c.destroyed||c.update(a);c.destroyed&&(this.scenes.splice(b,1),b--)}};
SceneManager$$module$src$core$SceneManager.prototype.render=function(a){this.scenes.forEach(function(b){b.destroyed||b.render(a)})};var module$src$core$SceneManager={};module$src$core$SceneManager.default=SceneManager$$module$src$core$SceneManager;var TimeManager$$module$src$core$TimeManager=function(a,b){var c=this;this.engine=a;this.lastStep=null;this.targetFps=b;this.deltaTime=1/this.targetFps;window.requestAnimationFrame(function(d){return c.step(d)})};TimeManager$$module$src$core$TimeManager.prototype.step=function(a){var b=this;if(null!=this.lastStep){var c=(a-this.lastStep)/1E3;c>1/this.targetFps&&(this.deltaTime=c,this.engine.loop(),this.lastStep=a)}else this.lastStep=a;window.requestAnimationFrame(function(d){return b.step(d)})};
var module$src$core$TimeManager={};module$src$core$TimeManager.default=TimeManager$$module$src$core$TimeManager;var Vector2$$module$src$core$math$Vector2=function(a,b){this.x=a;this.y=b};Vector2$$module$src$core$math$Vector2.prototype.multiply=function(a){this.x*=a.x;this.y*=a.y};Vector2$$module$src$core$math$Vector2.prototype.clone=function(){return new Vector2$$module$src$core$math$Vector2(this.x,this.y)};$jscomp.global.Object.defineProperties(Vector2$$module$src$core$math$Vector2.prototype,{length:{configurable:!0,enumerable:!0,get:function(){return sqrt(this.x+this.x*this.y+this.y)}}});
var module$src$core$math$Vector2={};module$src$core$math$Vector2.default=Vector2$$module$src$core$math$Vector2;var EventDispatcher$$module$src$core$events$EventDispatcher=function(){this.listeners=[]};EventDispatcher$$module$src$core$events$EventDispatcher.prototype.addEventListener=function(a,b,c){this.listeners.push(new EventListener$$module$src$core$events$EventDispatcher(a,b,void 0===c?null:c))};
EventDispatcher$$module$src$core$events$EventDispatcher.prototype.removeEventListener=function(a,b,c){c=void 0===c?null:c;for(var d=0;d<this.listeners.length;d++){var f=this.listeners[d];f.event==a&&f.callback==b&&f.callbackContext==c&&(this.listeners.splice(d,1),d--)}};EventDispatcher$$module$src$core$events$EventDispatcher.prototype.removeAllEventListeners=function(){this.listeners=[]};
EventDispatcher$$module$src$core$events$EventDispatcher.prototype.dispatchEvent=function(a,b){for(var c=0;c<this.listeners.length;c++){var d=this.listeners[c];d.event==a&&d.callback.bind(d.callbackContext)(b)}};var EventListener$$module$src$core$events$EventDispatcher=function(a,b,c){this.event=a;this.callback=b;this.callbackContext=c},module$src$core$events$EventDispatcher={};module$src$core$events$EventDispatcher.default=EventDispatcher$$module$src$core$events$EventDispatcher;var MouseEvent$$module$src$core$input$Mouse=function(){};$jscomp.global.Object.defineProperties(MouseEvent$$module$src$core$input$Mouse,{MOUSE_DOWN:{configurable:!0,enumerable:!0,get:function(){return"mouseDown"}},MOUSE_MOVE:{configurable:!0,enumerable:!0,get:function(){return"mouseMove"}},MOUSE_UP:{configurable:!0,enumerable:!0,get:function(){return"mouseUp"}}});
var Mouse$$module$src$core$input$Mouse=function(a){this.manager=a;this.isDown=!1;this.position=new Vector2$$module$src$core$math$Vector2(0,0);this.events=new EventDispatcher$$module$src$core$events$EventDispatcher;this.manager.engine.renderer.canvas.addEventListener("mousedown",this.onMouseDown.bind(this));this.manager.engine.renderer.canvas.addEventListener("mousemove",this.onMouseMove.bind(this));this.manager.engine.renderer.canvas.addEventListener("mouseup",this.onMouseUp.bind(this));this.manager.engine.renderer.container.addEventListener("mouseup",
this.onMouseUp.bind(this))};Mouse$$module$src$core$input$Mouse.prototype.onMouseDown=function(a){this.isDown=!0;this.position.x=a.offsetX;this.position.y=a.offsetY;this.events.dispatchEvent(MouseEvent$$module$src$core$input$Mouse.MOUSE_DOWN,this.position.clone())};Mouse$$module$src$core$input$Mouse.prototype.onMouseMove=function(a){this.position.x=a.offsetX;this.position.y=a.offsetY;this.events.dispatchEvent(MouseEvent$$module$src$core$input$Mouse.MOUSE_MOVE,this.position.clone())};
Mouse$$module$src$core$input$Mouse.prototype.onMouseUp=function(a){this.isDown=!1;this.events.dispatchEvent(MouseEvent$$module$src$core$input$Mouse.MOUSE_UP,this.position.clone())};var module$src$core$input$Mouse={};module$src$core$input$Mouse.MouseEvent=MouseEvent$$module$src$core$input$Mouse;module$src$core$input$Mouse.default=Mouse$$module$src$core$input$Mouse;var InputManager$$module$src$core$input$InputManager=function(a){this.engine=a;this.mouse=new Mouse$$module$src$core$input$Mouse(this)},module$src$core$input$InputManager={};module$src$core$input$InputManager.default=InputManager$$module$src$core$input$InputManager;var Engine$$module$src$core$Engine=function(a,b,c){this.renderer=new CanvasRenderer$$module$src$core$CanvasRenderer(this,a,b);this.scenes=new SceneManager$$module$src$core$SceneManager(this);this.time=new TimeManager$$module$src$core$TimeManager(this,c);this.assets=new AssetManager$$module$src$core$AssetManager(this);this.input=new InputManager$$module$src$core$input$InputManager(this)};Engine$$module$src$core$Engine.prototype.loop=function(){this.update(this.time.deltaTime);this.render()};
Engine$$module$src$core$Engine.prototype.update=function(a){this.scenes.update(a)};Engine$$module$src$core$Engine.prototype.render=function(){this.renderer.clear();this.scenes.render(this.renderer.context)};var module$src$core$Engine={};module$src$core$Engine.default=Engine$$module$src$core$Engine;var Scene$$module$src$core$Scene=function(a){this.engine=a;this.entities=[];this.destroyed=!1};Scene$$module$src$core$Scene.prototype.update=function(a){for(var b=0;b<this.entities.length;b++){var c=this.entities[b];c.destroyed||c.update(a);c.destroyed&&(this.entities.splice(b,1),b--)}};Scene$$module$src$core$Scene.prototype.render=function(a){this.entities.forEach(function(b){b.destroyed||b.render(a)})};
Scene$$module$src$core$Scene.prototype.destroy=function(){for(this.destroyed=!0;0<this.entities.length;)this.entities.pop().destroy();this.entities=[]};$jscomp.global.Object.defineProperties(Scene$$module$src$core$Scene.prototype,{input:{configurable:!0,enumerable:!0,get:function(){return this.engine.input}}});var module$src$core$Scene={};module$src$core$Scene.default=Scene$$module$src$core$Scene;var FileType$$module$src$core$AssetLoader=function(){};$jscomp.global.Object.defineProperties(FileType$$module$src$core$AssetLoader,{TEXTURE:{configurable:!0,enumerable:!0,get:function(){return"texture"}}});var AssetLoader$$module$src$core$AssetLoader=function(a){this.scene=a;this.totalAssets=this.assetsLoaded=0;this.maxConcurrentRequests=1;this.currentLoads=0;this.loadQueue=[]};
AssetLoader$$module$src$core$AssetLoader.prototype.load=function(a,b,c){this.totalAssets++;var d=null;switch(c){case FileType$$module$src$core$AssetLoader.TEXTURE:d=this.loadTexture.bind(this,a,b);break;default:console.error("Unknown file type")}this.currentLoads<this.maxConcurrentRequests?(this.currentLoads++,d()):this.loadQueue.push(d)};
AssetLoader$$module$src$core$AssetLoader.prototype.loadTexture=function(a,b){var c=new Image;c.crossOrigin="anonymous";var d=new XMLHttpRequest;d.open("GET",b);d.responseType="blob";d.onload=function(){if(200===d.status){var f=window.URL.createObjectURL(d.response);c.src=f;this.scene.engine.assets.textures[a]=c;this.onAssetLoaded()}else this.onAssetFailed("Image didn't load successfully; error code:"+d.statusText)}.bind(this);d.onerror=function(){this.onAssetFailed("There was a network error.")}.bind(this);
d.send()};AssetLoader$$module$src$core$AssetLoader.prototype.onAssetFailed=function(a){console.error(a);this.onAssetLoaded()};AssetLoader$$module$src$core$AssetLoader.prototype.onAssetLoaded=function(){setTimeout(function(){this.currentLoads--;this.assetsLoaded++;if(this.currentLoads<this.maxConcurrentRequests&&0<this.loadQueue.length)(0,this.loadQueue.splice(0,1)[0])()}.bind(this),75)};var module$src$core$AssetLoader={};module$src$core$AssetLoader.FileType=FileType$$module$src$core$AssetLoader;
module$src$core$AssetLoader.default=AssetLoader$$module$src$core$AssetLoader;var Entity$$module$src$core$Entity=function(a,b,c){this.scene=a;this.scene.entities.push(this);this.localPosition=new Vector2$$module$src$core$math$Vector2(b,c);this.localRotation=0;this.localScale=new Vector2$$module$src$core$math$Vector2(1,1);this.components=[];this.children=[];this.parent=null;this.destroyed=!1};
Entity$$module$src$core$Entity.prototype.getPosition=function(){for(var a=this.localPosition.clone(),b=this.parent;null!=b;){a.multiply(b.localScale);var c=a.x,d=a.y,f=Math.sin(b.localRotation*Math.PI/180),l=Math.cos(b.localRotation*Math.PI/180);a.x=l*c-f*d;a.y=f*c+l*d;a.x+=b.localPosition.x;a.y+=b.localPosition.y;b=b.parent}return a};Entity$$module$src$core$Entity.prototype.getRotation=function(){for(var a=this.localRotation,b=this.parent;null!=b;)a+=b.localRotation,b=b.parent;return a};
Entity$$module$src$core$Entity.prototype.getScale=function(){for(var a=this.localScale.clone(),b=this.parent;null!=b;)a.x*=b.localScale.x,a.y*=b.localScale.y,b=b.parent;return a};Entity$$module$src$core$Entity.prototype.addChild=function(a){-1==this.children.indexOf(a)&&(this.children.push(a),a.parent=this)};Entity$$module$src$core$Entity.prototype.removeChild=function(a){var b=this.children.indexOf(a);-1!=b&&(this.children.splice(b,1),a.parent=null)};
Entity$$module$src$core$Entity.prototype.update=function(a){for(var b=0;b<this.components.length;b++){var c=this.components[b];c.destroyed||c.update(a);c.destroyed&&(this.components.splice(b,1),b--)}};Entity$$module$src$core$Entity.prototype.render=function(a){this.components.forEach(function(b){b.destroyed||b.render(a)})};
Entity$$module$src$core$Entity.prototype.destroy=function(){this.destroyed=!0;this.children.forEach(function(a){a.destroy()});this.children=[];this.components.forEach(function(a){a.destroy()});this.components=[]};var module$src$core$Entity={};module$src$core$Entity.default=Entity$$module$src$core$Entity;var Component$$module$src$core$components$Component=function(a){this.entity=a;this.entity.components.push(this);this.events=new EventDispatcher$$module$src$core$events$EventDispatcher;this.destroyed=!1};Component$$module$src$core$components$Component.prototype.update=function(a){};Component$$module$src$core$components$Component.prototype.render=function(a){};Component$$module$src$core$components$Component.prototype.destroy=function(){this.destroyed=!0;this.entity=null};
var module$src$core$components$Component={};module$src$core$components$Component.default=Component$$module$src$core$components$Component;var Image$$module$src$core$components$Image=function(a,b){Component$$module$src$core$components$Component.call(this,a);this.key=b;this.origin=new Vector2$$module$src$core$math$Vector2(.5,.5);a=this.entity.scene.engine.assets.textures[this.key];this.width=a.width;this.height=a.height};$jscomp.inherits(Image$$module$src$core$components$Image,Component$$module$src$core$components$Component);
Image$$module$src$core$components$Image.prototype.render=function(a){a.save();var b=this.entity.getPosition(),c=this.entity.getScale(),d=b.x;b=b.y;var f=c.x;c=c.y;var l=this.entity.getRotation();a.setTransform(1,0,0,1,d,b);a.rotate(l*Math.PI/180);a.drawImage(this.entity.scene.engine.assets.textures[this.key],-this.width*f*this.origin.x,-this.height*c*this.origin.y,this.width*f,this.height*c);a.restore()};var module$src$core$components$Image={};module$src$core$components$Image.default=Image$$module$src$core$components$Image;var TextAlign$$module$src$core$components$TextField=function(){};$jscomp.global.Object.defineProperties(TextAlign$$module$src$core$components$TextField,{LEFT:{configurable:!0,enumerable:!0,get:function(){return"left"}},RIGHT:{configurable:!0,enumerable:!0,get:function(){return"right"}},CENTER:{configurable:!0,enumerable:!0,get:function(){return"center"}},START:{configurable:!0,enumerable:!0,get:function(){return"start"}},END:{configurable:!0,enumerable:!0,get:function(){return"end"}}});
var TextFieldConfig$$module$src$core$components$TextField=function(a,b,c,d,f){d=void 0===d?TextAlign$$module$src$core$components$TextField.LEFT:d;this.font=void 0===a?"Arial":a;this.size=void 0===b?"12px":b;this.color=void 0===c?"#000000":c;this.align=d;this.maxWidth=void 0===f?null:f},TextField$$module$src$core$components$TextField=function(a,b,c){c=void 0===c?null:c;Component$$module$src$core$components$Component.call(this,a);this.text=b;this.config=null;this.config=null==c?new TextFieldConfig$$module$src$core$components$TextField:
c};$jscomp.inherits(TextField$$module$src$core$components$TextField,Component$$module$src$core$components$Component);
TextField$$module$src$core$components$TextField.prototype.render=function(a){a.save();var b=this.entity.getPosition();this.entity.getScale();var c=b.x;b=b.y;var d=this.entity.getRotation();a.setTransform(1,0,0,1,c,b);a.rotate(d*Math.PI/180);a.font=this.config.size+" "+this.config.font;a.textAlign=this.config.align;a.fillStyle=this.config.color;null!=this.config.maxWidth?a.fillText(this.text,0,0,this.config.maxWidth):a.fillText(this.text,0,0);a.restore()};var module$src$core$components$TextField={};
module$src$core$components$TextField.TextAlign=TextAlign$$module$src$core$components$TextField;module$src$core$components$TextField.TextFieldConfig=TextFieldConfig$$module$src$core$components$TextField;module$src$core$components$TextField.default=TextField$$module$src$core$components$TextField;var LoadingScene$$module$src$breakout$scenes$LoadingScene=function(a){Scene$$module$src$core$Scene.call(this,a);this.loader=new AssetLoader$$module$src$core$AssetLoader(this);a=new Entity$$module$src$core$Entity(this,0,0);new Image$$module$src$core$components$Image(a,"splashBackground");a=new Entity$$module$src$core$Entity(this,25,25);new TextField$$module$src$core$components$TextField(a,"Loading...",new TextFieldConfig$$module$src$core$components$TextField("Arial","12px","#FFFFFF",TextAlign$$module$src$core$components$TextField.LEFT))};
$jscomp.inherits(LoadingScene$$module$src$breakout$scenes$LoadingScene,Scene$$module$src$core$Scene);LoadingScene$$module$src$breakout$scenes$LoadingScene.prototype.update=function(a){Scene$$module$src$core$Scene.prototype.update.call(this,a)};var module$src$breakout$scenes$LoadingScene={};module$src$breakout$scenes$LoadingScene.default=LoadingScene$$module$src$breakout$scenes$LoadingScene;var BootScene$$module$src$breakout$scenes$BootScene=function(a){Scene$$module$src$core$Scene.call(this,a);this.loader=new AssetLoader$$module$src$core$AssetLoader(this);this.loader.load("splashBackground","./assets/images/breakout-splash-background.png",FileType$$module$src$core$AssetLoader.TEXTURE);this.loader.load("loadingBarBackground","./assets/images/breakout-loading-bar-background.png",FileType$$module$src$core$AssetLoader.TEXTURE);this.loader.load("loadingBarFill","./assets/images/breakout-loading-bar-fill.png",
FileType$$module$src$core$AssetLoader.TEXTURE)};$jscomp.inherits(BootScene$$module$src$breakout$scenes$BootScene,Scene$$module$src$core$Scene);BootScene$$module$src$breakout$scenes$BootScene.prototype.update=function(a){Scene$$module$src$core$Scene.prototype.update.call(this,a);this.loader.assetsLoaded==this.loader.totalAssets&&(this.engine.scenes.remove(this),this.engine.scenes.add(new LoadingScene$$module$src$breakout$scenes$LoadingScene(this.engine)))};
var module$src$breakout$scenes$BootScene={};module$src$breakout$scenes$BootScene.default=BootScene$$module$src$breakout$scenes$BootScene;var Breakout$$module$src$breakout$Breakout=function(a,b,c){Engine$$module$src$core$Engine.call(this,a,b,c);this.scenes.add(new BootScene$$module$src$breakout$scenes$BootScene(this))};$jscomp.inherits(Breakout$$module$src$breakout$Breakout,Engine$$module$src$core$Engine);var module$src$breakout$Breakout={};module$src$breakout$Breakout.default=Breakout$$module$src$breakout$Breakout;var Button$$module$src$core$components$Button=function(a,b,c,d,f){f=void 0===f?null:f;Component$$module$src$core$components$Component.call(this,a);this.onClickCallback=d;this.onClickCallbackContext=f;this.width=b;this.height=c;this.origin=new Vector2$$module$src$core$math$Vector2(.5,.5);this.entity.scene.input.mouse.events.addEventListener(MouseEvent$$module$src$core$input$Mouse.MOUSE_DOWN,this.onMouseDown,this)};$jscomp.inherits(Button$$module$src$core$components$Button,Component$$module$src$core$components$Component);
Button$$module$src$core$components$Button.prototype.onMouseDown=function(a){var b=this.entity.getPosition(),c=this.entity.getScale();this.entity.getRotation();var d=b.x+this.width*c.x*(1-this.origin.x),f=b.y-this.height*c.y*this.origin.y,l=b.y+this.height*c.y*(1-this.origin.y);a.x>=b.x-this.width*c.x*this.origin.x&&a.x<=d&&a.y>=f&&a.y<=l&&null!=this.onClickCallback&&this.onClickCallback.bind(this.onClickCallbackContext)()};
Button$$module$src$core$components$Button.prototype.destroy=function(){this.entity.scene.input.mouse.events.removeEventListener(MouseEvent$$module$src$core$input$Mouse.MOUSE_DOWN,this.onMouseDown,this)};var module$src$core$components$Button={};module$src$core$components$Button.default=Button$$module$src$core$components$Button;window.addEventListener("DOMContentLoaded",function(a){window.engine=new Breakout$$module$src$breakout$Breakout(1024,768,30)});var module$src$index={};
